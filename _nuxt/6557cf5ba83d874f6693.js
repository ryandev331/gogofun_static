(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{453:function(e,t,o){},454:function(e,t,o){},671:function(e,t,o){"use strict";var n=o(453);o.n(n).a},672:function(e,t,o){"use strict";var n=o(454);o.n(n).a},678:function(e,t,o){"use strict";o.r(t);o(57);var n,r=o(17),l=(o(18),o(103)),c=o.n(l),d=o(250),m=o.n(d),v=o(498),h=o(499),f=o(28),y={name:"radioInput",components:{ValidationObserver:f.a,ValidationProvider:f.b},data:function(){return{}},props:["name","rules","value","type","placeholder","label","options"],computed:{radioValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},isRequired:function(){return this.rules.indexOf("required")}}},w=o(11),_=Object(w.a)(y,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ValidationProvider",{attrs:{tag:"div",rules:e.rules,name:e.name},scopedSlots:e._u([{key:"default",fn:function(t){t.errors;return e._l(e.options,(function(option){return o("span",{key:option.value},["checkbox"===e.type?o("input",{directives:[{name:"model",rawName:"v-model",value:e.radioValue,expression:"radioValue"}],attrs:{name:e.name,id:option.id,type:"checkbox"},domProps:{value:option.value,checked:Array.isArray(e.radioValue)?e._i(e.radioValue,option.value)>-1:e.radioValue},on:{change:function(t){var o=e.radioValue,n=t.target,r=!!n.checked;if(Array.isArray(o)){var l=option.value,c=e._i(o,l);n.checked?c<0&&(e.radioValue=o.concat([l])):c>-1&&(e.radioValue=o.slice(0,c).concat(o.slice(c+1)))}else e.radioValue=r}}}):"radio"===e.type?o("input",{directives:[{name:"model",rawName:"v-model",value:e.radioValue,expression:"radioValue"}],attrs:{name:e.name,id:option.id,type:"radio"},domProps:{value:option.value,checked:e._q(e.radioValue,option.value)},on:{change:function(t){e.radioValue=option.value}}}):o("input",{directives:[{name:"model",rawName:"v-model",value:e.radioValue,expression:"radioValue"}],attrs:{name:e.name,id:option.id,type:e.type},domProps:{value:option.value,value:e.radioValue},on:{input:function(t){t.target.composing||(e.radioValue=t.target.value)}}}),e._v(" "),o("label",{attrs:{for:option.id}},[e._v(e._s(option.text))])])}))}}])})}),[],!1,null,"5aaa0b73",null).exports,x={name:"passwordInput",components:{ValidationObserver:f.a,ValidationProvider:f.b},data:function(){return{}},props:["name","rules","value","type","placeholder","label"],computed:{textValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},isRequired:function(){return this.rules.indexOf("required")}}},k=(o(671),Object(w.a)(x,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ValidationProvider",{attrs:{tag:"div",rules:e.rules,name:e.name},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.valid,r=t.errors;return[o("b-col",{attrs:{sm:"9"}},[e.label?o("span",[e._v(e._s(e.label))]):e._e(),e._v(" "),-1!==e.isRequired?o("span",{staticClass:"remind"},[e._v("必填")]):e._e(),e._v(" "),o("b-form-input",{staticClass:"bg-grey-1",attrs:{state:!r[0]&&(!!n||null),placeholder:e.placeholder},model:{value:e.textValue,callback:function(t){e.textValue=t},expression:"textValue"}})],1),e._v(" "),o("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v("\n\t\t"+e._s(r[0]?r[0]:"")+"\n\t")])]}}])})}),[],!1,null,"79d2954c",null).exports),M={name:"signupMemberType",components:{loading:v.a,ValidationObserver:f.a,ValidationProvider:f.b,textInput:h.a,radioInput:_,passwordInput:k},data:function(){return{showLoading:!1,verifiedText:"",checkPassword:"",step:"1",memberType:"",steps:[{fields:[{name:"mobile",label:"手機號碼",type:"text",rules:"required|mobile",value:"",placeholder:"請輸入註冊時的手機號碼"},{name:"verify",label:"簡訊驗證",type:"text",rules:"required|verify",value:"",placeholder:"請輸入簡訊驗證碼"}]},{fieldsNameGroup:[{name:"name",label:"姓名",type:"text",rules:"required",value:"",placeholder:"請輸入真實姓名，未來可於會員中心更改"},{name:"sex",type:"radio",rules:"",value:"1",options:[{id:"male",value:"1",text:"先生"},{id:"female",value:"2",text:"小姐"}]}],fieldsNotNameGroup:[{name:"email",label:"Email郵件",type:"text",rules:"email",value:"",placeholder:"請輸入Email郵件，搶先接收第一手新服務或優惠"},{name:"password",label:"輸入密碼",type:"text",rules:"required|min:6|max:20",value:"",placeholder:"請輸入密碼，長度6~20位數字或英文，大小寫有分"},{name:"checkPassword",label:"確認密碼",type:"text",rules:"required|confirmed:password|min:6|max:20",value:"",placeholder:"請輸入密碼，需與上方密碼相同"}]}],responses:{responseVerifyText:"",responseMobileText:"",responseSignupText:""}}},computed:{memberTypeText:function(){switch(this.memberType){case"general":return"買家/租客";case"agency":return"房仲";case"landloard":return"屋主/代理人"}},memberTypeId:function(){switch(this.memberType){case"general":return"1";case"agency":return"3";case"landloard":return"2"}},canNext:function(){},formData:function(){var e=this;return e.steps.reduce((function(t,o,n,r){return 0===n?o.fields.forEach((function(e){"checkPassword"!==e.name&&(t[e.name]=e.value)})):1===n&&(o.fieldsNameGroup.forEach((function(e){"checkPassword"!==e.name&&(t[e.name]=e.value)})),o.fieldsNotNameGroup.forEach((function(e){"checkPassword"!==e.name&&(t[e.name]=e.value)}))),t.type=e.memberTypeId,t.userID=t.mobile,t}),{})}},created:function(){this.memberType=this.$route.params.memberType,console.log(this.$route)},mounted:function(){console.log("formData",this.formData),console.log("steps",this.steps),console.log(this.steps[1].fields),console.log(this.stepTwoName)},validate:function(e){var t=e.params,o=!0;return"general"!==t.memberType&&"agency"!==t.memberType&&"landloard"!==t.memberType&&(o=!1),o},methods:{switchModal:function(e,t,o,n,r){"showModal"===e?(this.responses[o]=n,this.$bvModal.show(t),r&&(location.href=r)):"hideModal"===e&&(this.$bvModal.hide(t),r&&(location.href=r))},requestVerify:function(){var e=this,data={},t={};data.mobile=this.formData.mobile,data.type="1",t.data=data,t=m.a.stringify(t),console.log("Send verify"),c.a.post("/test_user/sendVerify",t).then((function(t){switch(t.data.status){case"0":e.switchModal("showModal","responseMobile","responseMobileText","驗證發已傳送");break;case"1":e.switchModal("showModal","responseMobile","responseMobileText","手機號碼已註冊");break;case"2":console.log(),e.switchModal("showModal","responseMobile","responseMobileText","手機格式錯誤");break;case"3":e.switchModal("showModal","responseMobile","responseMobileText","帳號不存在")}setTimeout(e.switchModal,7e3,"hideModal","responseMobile")})).then((function(e){console.log("error:"+e)}))},sendVerify:function(){var e=this,data={},t={};data.mobile=this.formData.mobile,data.verify=this.formData.verify,t.data=data,e.showLoading=!0,t=m.a.stringify(t),c.a.post("/test_user/verify",t).then((function(o){switch(e.showLoading=!1,console.log("postData",t),console.log("response",o),console.log("response data",o.data),o.data.status){case"0":e.step="2";break;case"1":e.switchModal("showModal","responseVerify","responseVerifyText","驗證碼已過期");break;case"2":e.switchModal("showModal","responseVerify","responseVerifyText","驗證碼錯誤")}setTimeout(e.switchModal,7e3,"hideModal","responseVerify")})).then((function(e){console.log("error:"+e)}))},submit:(n=Object(r.a)(regeneratorRuntime.mark((function e(){var t,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.$refs.stepTwo.validate();case 3:e.sent?((o={}).data=this.formData,o=m.a.stringify(o),c.a.post("/test_user/signup",o).then((function(e){switch(console.log("postData",o),console.log("response",e),console.log("response data",e.data),e.data.status){case"0":t.switchModal("showModal","responseSignup","responseSignupText","註冊成功","/");break;case"1":t.switchModal("showModal","responseSignup","responseSignupText","手機號碼已註冊");break;case"2":console.log(),t.switchModal("showModal","responseSignup","responseSignupText","手機號碼未驗證成功");break;case"3":t.switchModal("showModal","responseSignup","responseSignupText","無此會員類型")}setTimeout(t.switchModal,7e3,"hideModal","responseSignup")})).then((function(e){console.log("error:"+e)}))):t.switchModal("showModal","responseSignup","responseSignupText","請確認欄位填寫正確!");case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}},V=(o(672),Object(w.a)(M,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("main",[e.showLoading?o("loading"):e._e(),e._v(" "),o("section",{staticClass:"my-5 py-5"},[o("div",{staticClass:"container"},[o("div",{staticClass:"w-16 mx-auto text-dark-blue-3 py-3 ",attrs:{align:"center"}},[o("div",{staticClass:"w-16 mx-auto col-sm-12 position-relative"},["2"==e.step?o("a",{staticClass:"mr-auto pointer position-absolute left"},[o("fa",{attrs:{icon:["fas","chevron-left"]},on:{click:function(t){e.step--}}}),e._v(" "),o("span",[e._v("上一步")])],1):e._e(),e._v(" "),o("span",[e._v("開始註冊來體驗")])])]),e._v(" "),"1"==e.step?o("ValidationObserver",{ref:"stepOne",staticClass:"stepOne",attrs:{tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.invalid;t.passes;return[e._l(e.steps[0].fields,(function(t){return o(t.type+"Input",{key:t.name,tag:"component",staticClass:"w-16 col-sm-12 mx-auto mb-5",attrs:{name:t.name,rules:t.rules,placeholder:t.placeholder,type:t.type,label:t.label,requestVerify:e.requestVerify},model:{value:t.value,callback:function(o){e.$set(t,"value",o)},expression:"field.value"}},[e._v(e._s(t.name))])})),e._v(" "),o("div",{staticClass:"w-16 col-sm-12 mx-auto"},[o("b-button",{staticClass:"d-block w-20",attrs:{type:"button",variant:"medium-blue",disabled:n},on:{click:e.sendVerify}},[e._v("下一步")])],1)]}}],null,!1,2989893376)}):e._e(),e._v(" "),"2"==e.step?o("ValidationObserver",{ref:"stepTwo",staticClass:"stepTwo",attrs:{tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){t.invalid,t.passes;return[o("div",{staticClass:"w-16 col-sm-12 mx-auto d-flex justify-content-center align-items-center"},e._l(e.steps[1].fieldsNameGroup,(function(t){return o(t.type+"Input",{key:t.name,tag:"component",class:"name"===t.name?"w-13 d-inline-block":"w-7 d-inline-block d-flex justify-content-around",attrs:{name:t.name,rules:t.rules,placeholder:t.placeholder,type:t.type,label:t.label,options:t.options},model:{value:t.value,callback:function(o){e.$set(t,"value",o)},expression:"field.value"}},[e._v(e._s(t.name))])})),1),e._v(" "),e._l(e.steps[1].fieldsNotNameGroup,(function(t){return o(t.type+"Input",{key:t.name,tag:"component",staticClass:"w-16 col-sm-12 mx-auto mb-3",attrs:{name:t.name,rules:t.rules,placeholder:t.placeholder,type:t.type,label:t.label,options:t.options},model:{value:t.value,callback:function(o){e.$set(t,"value",o)},expression:"field.value"}},[e._v(e._s(t.name))])})),e._v(" "),o("div",{staticClass:"w-16 col-sm-12 mx-auto"},[o("b-button",{staticClass:"signup w-20 d-block mt-4 mb-2",attrs:{type:"submit",variant:"medium-blue"},on:{click:e.submit}},[e._v("註冊")])],1),e._v(" "),o("div",{staticClass:"w-16 col-sm-12 mx-auto",attrs:{align:"center"}},[e._v("\n\t\t\t\t\t註冊代表您同意本站的\n\t\t\t\t\t"),o("nuxt-link",{attrs:{to:""}},[e._v("服務條款")]),e._v("\n\t\t\t\t\t與\n\t\t\t\t\t"),o("nuxt-link",{attrs:{to:""}},[e._v("隱私政策")])],1)]}}],null,!1,3620315068)}):e._e(),e._v(" "),e._m(0),e._v(" "),o("div",{staticClass:"w-16 col-sm-12 mx-auto",attrs:{align:"center"}},[e._v("\n\t\t\t\t已經是會員了?\n\t\t\t\t"),o("nuxt-link",{attrs:{to:"/signin"}},[e._v("點我登入")])],1),e._v(" "),e._m(1)],1),e._v(" "),o("b-modal",{attrs:{id:"responseMobile",size:"sm","no-stacking":"","hide-header":"","hide-footer":"","body-bg-variant":"modal-bg","body-text-variant":"white","body-border-variant":"white","header-border-variant":"white","footer-border-variant":"white","content-class":"bg-transparent"}},[e._v(e._s(e.responses.responseMobileText))]),e._v(" "),o("b-modal",{attrs:{id:"responseVerify",size:"sm","no-stacking":"","hide-header":"","hide-footer":"","body-bg-variant":"modal-bg","body-text-variant":"white","body-border-variant":"white","header-border-variant":"white","footer-border-variant":"white","content-class":"bg-transparent"}},[e._v(e._s(e.responses.responseVerifyText))]),e._v(" "),o("b-modal",{attrs:{id:"responseSignup",size:"sm","no-stacking":"","hide-header":"","hide-footer":"","body-bg-variant":"modal-bg","body-text-variant":"white","body-border-variant":"white","header-border-variant":"white","footer-border-variant":"white","content-class":"bg-transparent"}},[e._v(e._s(e.responses.responseSignupText))])],1)],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"w-16 col-sm-12 mx-auto"},[t("hr",{staticClass:"w-16 mx-auto"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"w-16 col-sm-12 mx-auto",attrs:{align:"center"}},[this._v("\n\t\t\t\t相關問題請加入\n\t\t\t\t"),t("a",{attrs:{href:"https://line.me/ti/p/xKxgisePsB"}},[this._v("線上客服")])])}],!1,null,"c5674b4a",null));t.default=V.exports}}]);